"use strict";function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}const defaults={elements:"h1, h2, h3, h4, h5, h6, p",pattern:/[\t\n.!?]+$/,replace:", Bitch!",before:false,active:false,hash:"bitch",keyword:"bitch"};class Bitchify{constructor(e,t){this.options=_objectSpread(_objectSpread({},defaults),e);this.active=this._isHash()||this.options.active;if(t&&typeof t==="function"){this.callback=t}if(this.active){this.render()}else{this._addKeypress();this._addHashchange()}}render(){if(this.active){return}this.active=true;const e=document.querySelectorAll(this.options.elements);for(const t of e){t.innerHTML=this._replace(t.innerHTML)}document.removeEventListener("keypress",this._onKeypress);window.removeEventListener("hashchange",this._onHashchange);if(this.callback){this.callback()}return this}_replace(e){const{before:t,pattern:r,replace:i}=this.options;e=e.trim().replace(r,"");return t?i+e:e+i}_isHash(){const{hash:e}=this.options;return!!e&&this._stripHash(window.location.hash)===this._stripHash(e)}_stripHash(e){return e.replace(/^#/,"")}_addKeypress(){if(this.options.keyword){this.keylog=[];this.keyword=this.options.keyword;this._onKeypress=this._onKeypress.bind(this);document.addEventListener("keypress",this._onKeypress)}}_addHashchange(){if(this.options.hash){this._onHashchange=this._onHashchange.bind(this);window.addEventListener("hashchange",this._onHashchange)}}_validateKey(e){this.keylog.push(e);if(this.keylog.length>this.keyword.length){this.keylog.shift()}return this.keylog.join("")===this.keyword}_onKeypress(e){if(this._validateKey(e.key)){this.render()}}_onHashchange(){if(this._isHash()){this.render()}}}